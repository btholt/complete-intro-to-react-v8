{"pageProps":{"post":{"attributes":{"description":""},"html":"<p>I&#39;m not a fan of seeking 100% test coverage. I think it&#39;s a fool&#39;s errand and a waste of time. I&#39;d rather you write five tests that cover the most important five lines of your code than see you write one test for five less-important pieces of UI code.</p>\n<p>But let&#39;s show you an easy way to cheat and get there! Let&#39;s talk about snapshot testing.</p>\n<p>Snapshot tests are low confidence, low cost ways of writing tests. With more-or-less a single line of code you can assert: this code doesn&#39;t break, and it isn&#39;t changing over time.</p>\n<p>Let&#39;s test Results.jsx. It&#39;s a pretty stable component that doesn&#39;t do a lot. A low cost, low confidence test could fit here. Make a file called Results.test.jsx</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { expect, test } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;vitest&quot;</span>;\n<span class=\"hljs-keyword\">import</span> { render } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;@testing-library/react&quot;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Results</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;../Results&quot;</span>;\n\n<span class=\"hljs-title function_\">test</span>(<span class=\"hljs-string\">&quot;renders correctly with no pets&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> { asFragment } = <span class=\"hljs-title function_\">render</span>(<span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Results</span> <span class=\"hljs-attr\">pets</span>=<span class=\"hljs-string\">{[]}</span> /&gt;</span></span>);\n  <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">asFragment</span>()).<span class=\"hljs-title function_\">toMatchSnapshot</span>();\n});\n</code></pre>\n<p>Run this to see Vitest say it created a snapshot. Go look now at Results.test.jsx.snap to see what it created. You can see it&#39;s just rendering out what it would look like. Now if you modify Results.jsx it will fail the test. As you can see, it&#39;s a quick gut check to make sure your changes don&#39;t have cascading problems. If I modify App.jsx and it causes this to fail it means I can catch it and validate quickly. Some people don&#39;t find it useful. I&#39;m not entirely sold on it to be honest; at most these should be used very sparingly. This could be useful if you have a component that expect to <em>never</em> change and it would be a problem if it did. Maybe a footer? I don&#39;t know. I never write these.</p>\n<p>Let&#39;s add some pets and see how it does.</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// import</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">StaticRouter</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;react-router-dom/server&quot;</span>;\n\n<span class=\"hljs-comment\">// sample</span>\n<span class=\"hljs-keyword\">const</span> pets = [\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Luna&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;dog&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Seattle&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;WA&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Luna is actually the most adorable dog in the world. Her hobbies include yelling at squirrels, aggressively napping on her owners&#x27; laps, and asking to be fed two hours before IT&#x27;S DAMN WELL TIME LUNA. Luna is beloved by her puppy parents and lazily resides currently in Seattle, Washington.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Havanese&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [\n      <span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog25.jpg&quot;</span>,\n      <span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog26.jpg&quot;</span>,\n      <span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog27.jpg&quot;</span>,\n      <span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog28.jpg&quot;</span>,\n      <span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog29.jpg&quot;</span>,\n    ],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">2</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Charisse&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;rabbit&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Lexington&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;KY&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Maecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.\\n\\nMaecenas tristique, est et tempus semper, est quam pharetra magna, ac consequat metus sapien ut nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam. Suspendisse potenti.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Havanese&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/rabbit0.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">3</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Maitilde&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;rabbit&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Dallas&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;TX&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Duis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.\\n\\nMauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.\\n\\nNullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Lab&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/rabbit1.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">4</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Natalina&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;rabbit&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Tampa&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;FL&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Mauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.\\n\\nNullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.\\n\\nIn quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Lab&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/rabbit2.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">5</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Michail&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;reptile&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Tuscaloosa&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;AL&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.\\n\\nCras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.\\n\\nQuisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Havanese&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/reptile1.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">6</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Gizela&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;bird&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Carol Stream&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;IL&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Nullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.\\n\\nIn quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Havanese&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/bird2.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">7</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Laughton&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;reptile&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Bridgeport&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;CT&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Havanese&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/reptile2.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">8</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Si&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;dog&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Charlotte&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;NC&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Praesent id massa id nisl venenatis lacinia. Aenean sit amet justo. Morbi ut odio.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Lab&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog0.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">9</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Lyda&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;rabbit&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Springfield&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;IL&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Curabitur gravida nisi at nibh. In hac habitasse platea dictumst. Aliquam augue quam, sollicitudin vitae, consectetuer eget, rutrum at, lorem.\\n\\nInteger tincidunt ante vel ipsum. Praesent blandit lacinia erat. Vestibulum sed magna at nunc commodo placerat.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Lab&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/rabbit3.jpg&quot;</span>],\n  },\n  {\n    <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">10</span>,\n    <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&quot;Jackquelin&quot;</span>,\n    <span class=\"hljs-attr\">animal</span>: <span class=\"hljs-string\">&quot;dog&quot;</span>,\n    <span class=\"hljs-attr\">city</span>: <span class=\"hljs-string\">&quot;Tucson&quot;</span>,\n    <span class=\"hljs-attr\">state</span>: <span class=\"hljs-string\">&quot;AZ&quot;</span>,\n    <span class=\"hljs-attr\">description</span>:\n      <span class=\"hljs-string\">&quot;Donec diam neque, vestibulum eget, vulputate ut, ultrices vel, augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec pharetra, magna vestibulum aliquet ultrices, erat tortor sollicitudin mi, sit amet lobortis sapien sapien non mi. Integer ac neque.&quot;</span>,\n    <span class=\"hljs-attr\">breed</span>: <span class=\"hljs-string\">&quot;Lab&quot;</span>,\n    <span class=\"hljs-attr\">images</span>: [<span class=\"hljs-string\">&quot;http://pets-images.dev-apis.com/pets/dog1.jpg&quot;</span>],\n  },\n];\n\n<span class=\"hljs-comment\">// under other test</span>\n<span class=\"hljs-title function_\">test</span>(<span class=\"hljs-string\">&quot;renders correctly with some pets&quot;</span>, <span class=\"hljs-function\">() =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> { asFragment } = <span class=\"hljs-title function_\">render</span>(\n    <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">StaticRouter</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Results</span> <span class=\"hljs-attr\">pets</span>=<span class=\"hljs-string\">{pets}</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">StaticRouter</span>&gt;</span></span>\n  );\n  <span class=\"hljs-title function_\">expect</span>(<span class=\"hljs-title function_\">asFragment</span>()).<span class=\"hljs-title function_\">toMatchSnapshot</span>();\n});\n</code></pre>\n<p>This works, and now you can stick with this, but here&#39;s a problem. If you look at your snapshot, it&#39;s rendering Pet components as well. Now if you modify Pet.jsx (that has its own tests already) your <em>Results.jsx</em> test is going to fail. This is misleading, nothing is wrong or different with Results.jsx. In previous version of this class I show you how to accomplish this with react-test-renderer. However the folks at @testing-lib think shallow rendering is more harmful than helpful (I like, 75% agree) so we&#39;ll leave it out. <a href=\"https://frontendmasters.com/courses/intermediate-react-v4/snapshots/\">Click here</a> to see me teach this previously. It&#39;s 95% the same, just uses Jest instead of Vitest.</p>\n<p>Update your snapshots by either running <code>npm run test -- -u</code> or you can use the watcher to do it with either <code>u</code> to update all at once or do <code>i</code> one-by-one.</p>\n<p>You should commit snapshot files to git.</p>\n<p>I&#39;ll let it up to you how much you value these tests. I think they have a very limited place in UI testing but it&#39;s pretty low level of help. Frequently they become more noise than help. In any case, keep them in your toolbox, some times they can be helpful.</p>\n","slug":"snapshots","title":"Snapshots","section":"Testing","icon":"vial","filePath":"/home/runner/work/complete-intro-to-react-v8/complete-intro-to-react-v8/lessons/15-testing/F-snapshots.md","nextSlug":"/lessons/testing/c8","prevSlug":"/lessons/testing/mocks"}},"__N_SSG":true}