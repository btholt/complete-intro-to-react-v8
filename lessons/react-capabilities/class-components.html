<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Class Components – Complete Intro to React v8</title><meta name="description" content="Come learn React from Brian Holt, a veteran React.js developer on Frontend Masters"/><meta name="og:description" content="Come learn React from Brian Holt, a veteran React.js developer on Frontend Masters"/><meta name="og:title" content="Class Components – Complete Intro to React v8"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/3dae6366d30e4e57.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3dae6366d30e4e57.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-fd82975a6094609f.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-18053c3f67c4d467.js" defer=""></script><script src="/_next/static/chunks/pages/_app-39b20433cd23d432.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-327376b1b9678381.js" defer=""></script><script src="/_next/static/ZUSqRzmCYYtXOVCRJrkjn/_buildManifest.js" defer=""></script><script src="/_next/static/ZUSqRzmCYYtXOVCRJrkjn/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React v8</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/workshops/complete-react-v8/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>Let&#39;s make a nice photo carousel of the pictures for the animal now. We&#39;re going to do this using class components which is the &quot;older&quot; way of doing React. It&#39;s still fairly common to write components this way and still supported (i.e. not deprecated) so it&#39;s useful for you to know how to do it.</p>
<p>Make a new file called Carousel.jsx:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Carousel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  state = {
    <span class="hljs-attr">active</span>: <span class="hljs-number">0</span>,
  };

  <span class="hljs-keyword">static</span> defaultProps = {
    <span class="hljs-attr">images</span>: [<span class="hljs-string">&quot;http://pets-images.dev-apis.com/pets/none.jpg&quot;</span>],
  };

  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> { active } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
    <span class="hljs-keyword">const</span> { images } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;
    <span class="hljs-keyword">return</span> (
      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;carousel&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{images[active]}</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;animal&quot;</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;carousel-smaller&quot;</span>&gt;</span>
          {images.map((photo, index) =&gt; (
            // eslint-disable-next-line
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
              <span class="hljs-attr">key</span>=<span class="hljs-string">{photo}</span>
              <span class="hljs-attr">src</span>=<span class="hljs-string">{photo}</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">{index</span> === <span class="hljs-string">active</span> ? &quot;<span class="hljs-attr">active</span>&quot; <span class="hljs-attr">:</span> &quot;&quot;}
              <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;animal thumbnail&quot;</span>
            /&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Carousel</span>;
</code></pre>
<ul>
<li>Every class component extends <code>React.Component</code>. Every class component must have a render method that returns some sort of JSX / markup / call to <code>React.createElement</code>.</li>
<li>We used to have a <code>constructor</code> function to set initial state. Now with class properties we can skip that. If you want to see how that looked, <a href="https://btholt.github.io/complete-intro-to-react-v7/lessons/react-capabilities/class-components">check out v7 of this course</a></li>
<li>Notice instead of getting props via parameters and state via <code>useState</code> we&#39;re getting it from the instance variables <code>this.state</code> and <code>this.props</code>. This is how it works with class components. Neither one will you mutate directly.<ul>
<li><code>this.state</code> is the mutable state of the component (like useState). You&#39;ll use <code>this.setState</code> to mutate it (don&#39;t modify it directly.)</li>
<li><code>this.props</code> comes from the parent component, similar to parameter given to the render functions that we pull props out of.</li>
</ul>
</li>
<li>We also set <code>defaultProps</code> in the case that someone uses this component without providing it with props. This allows us to always assume that the photos prop is going to be an array instead of having to do a bunch of &quot;if this thing exists&quot; logic.</li>
</ul>
<h2 id="lifecycle-methods">Lifecycle methods</h2>
<p>Class components have lifecycle methods. These for the most part are what <code>useEffect</code> does for function components. They&#39;re for doing things like making API calls, starting and ending transitions/animations, debugging, and other things like that. We don&#39;t need to use any here, but let&#39;s look at a few of the most common ones</p>
<ul>
<li><code>constructor</code> isn&#39;t necessarily a <em>React</em> lifecylce method but we use it like one. It&#39;s where you do things that need to happen before the first render. Generally it&#39;s where you set the initial state.</li>
<li><code>componentDidMount</code> is a function that&#39;s called after the first rendering is completed. This pretty similar to a <code>useEffect</code> call that only calls the first time. This is typically where you want to do data fetching. It doesn&#39;t have to be async; we just made it async here to make the data fetching easy.</li>
<li><code>componentDidUpdate</code> is called after your state is updated. If you&#39;re doing something like Typeahead where you&#39;re making reactive requests to an API based on user input, this would be an ideal place to do it.</li>
<li><code>componentWillUnmount</code> is typically a place for cleanup. Let&#39;s say you had to write a component to integrate with jQuery (I&#39;ve had to write this, multiple times), this is where you&#39;d clean up those references (like unattaching from DOM nodes and deleting them) so you don&#39;t leak memory. This method is invoked whenever a component is about to be destroyed.</li>
</ul>
<p>This class doesn&#39;t cover all the lifecycle methods but you can imagine having different timings for different capabilities of a component can be useful. For example, if you have a set of props that come in and you need to filter those props before you display them, you can use <code>getDerivedStateFromProps</code>. Or if you need to react to your component being removed from the DOM (like if you&#39;re subscribing to an API and you need to dispose of the subscription) you can use <code>componentWillUnmount</code>.</p>
<p>There are lots more you can check out in <a href="https://reactjs.org/docs/react-component.html">the React docs here</a>.</p>
<p>Add the Carousel component to the Detail page.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// import at top</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Carousel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Carousel&quot;</span>;

<span class="hljs-comment">// first component inside div.details</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Carousel</span> <span class="hljs-attr">images</span>=<span class="hljs-string">{pet.images}</span> /&gt;</span></span>;
</code></pre>
<p>Let&#39;s make it so we can react to someone changing the photo on the carousel.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// add event listener</span>
handleIndexClick = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({
    <span class="hljs-attr">active</span>: +event.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">index</span>
  });
};

<span class="hljs-comment">// above smaller img</span>
<span class="hljs-comment">// eslint-disable-next-line</span>

<span class="hljs-comment">// add to img</span>
onClick={<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleIndexClick</span>}
data-index={index}
</code></pre>
<ul>
<li>This is how you handle events in React class components. If it was keyboard handler, you&#39;d do an onChange or onKeyUp, etc. handler.</li>
<li>Notice that the handleIndexClick function is an arrow function. This is because we need the <code>this</code> in <code>handleIndexClick</code> to be the correct <code>this</code>. An arrow function assures that because it will be the scope of where it was defined. This is common with how to deal with event handlers with class components.</li>
<li>The data attribute comes back as a string. We want it to be a number, hence the <code>+</code>.</li>
<li>We&#39;re doing bad accessibility stuff. But this makes it a lot simpler for learning for now. But don&#39;t do this in production.</li>
</ul>
<blockquote>
<p>🏁 <a href="https://github.com/btholt/citr-v8-project/tree/master/11-class-components">Click here to see the state of the project up until now: 11-class-components</a></p>
</blockquote>
</div><div class="lesson-links"><a href="/lessons/react-capabilities/uncontrolled-forms" class="prev">← Previous</a><a href="/lessons/special-case-react-tools/error-boundaries" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":"Class components work a little different from hooks in terms of marshalling state. Brian teaches you how to manage your state using setState and life cycle methods."},"html":"\u003cp\u003eLet\u0026#39;s make a nice photo carousel of the pictures for the animal now. We\u0026#39;re going to do this using class components which is the \u0026quot;older\u0026quot; way of doing React. It\u0026#39;s still fairly common to write components this way and still supported (i.e. not deprecated) so it\u0026#39;s useful for you to know how to do it.\u003c/p\u003e\n\u003cp\u003eMake a new file called Carousel.jsx:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eComponent\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCarousel\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eComponent\u003c/span\u003e {\n  state = {\n    \u003cspan class=\"hljs-attr\"\u003eactive\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e,\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e defaultProps = {\n    \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026quot;http://pets-images.dev-apis.com/pets/none.jpg\u0026quot;\u003c/span\u003e],\n  };\n\n  \u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { active } = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { images } = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprops\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n      \u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;carousel\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eimg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{images[active]}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ealt\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;animal\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;carousel-smaller\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          {images.map((photo, index) =\u0026gt; (\n            // eslint-disable-next-line\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eimg\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{photo}\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003esrc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{photo}\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{index\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003eactive\u003c/span\u003e ? \u0026quot;\u003cspan class=\"hljs-attr\"\u003eactive\u003c/span\u003e\u0026quot; \u003cspan class=\"hljs-attr\"\u003e:\u003c/span\u003e \u0026quot;\u0026quot;}\n              \u003cspan class=\"hljs-attr\"\u003ealt\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;animal thumbnail\u0026quot;\u003c/span\u003e\n            /\u0026gt;\u003c/span\u003e\n          ))}\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e\n    );\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCarousel\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eEvery class component extends \u003ccode\u003eReact.Component\u003c/code\u003e. Every class component must have a render method that returns some sort of JSX / markup / call to \u003ccode\u003eReact.createElement\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eWe used to have a \u003ccode\u003econstructor\u003c/code\u003e function to set initial state. Now with class properties we can skip that. If you want to see how that looked, \u003ca href=\"https://btholt.github.io/complete-intro-to-react-v7/lessons/react-capabilities/class-components\"\u003echeck out v7 of this course\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eNotice instead of getting props via parameters and state via \u003ccode\u003euseState\u003c/code\u003e we\u0026#39;re getting it from the instance variables \u003ccode\u003ethis.state\u003c/code\u003e and \u003ccode\u003ethis.props\u003c/code\u003e. This is how it works with class components. Neither one will you mutate directly.\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ethis.state\u003c/code\u003e is the mutable state of the component (like useState). You\u0026#39;ll use \u003ccode\u003ethis.setState\u003c/code\u003e to mutate it (don\u0026#39;t modify it directly.)\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ethis.props\u003c/code\u003e comes from the parent component, similar to parameter given to the render functions that we pull props out of.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eWe also set \u003ccode\u003edefaultProps\u003c/code\u003e in the case that someone uses this component without providing it with props. This allows us to always assume that the photos prop is going to be an array instead of having to do a bunch of \u0026quot;if this thing exists\u0026quot; logic.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"lifecycle-methods\"\u003eLifecycle methods\u003c/h2\u003e\n\u003cp\u003eClass components have lifecycle methods. These for the most part are what \u003ccode\u003euseEffect\u003c/code\u003e does for function components. They\u0026#39;re for doing things like making API calls, starting and ending transitions/animations, debugging, and other things like that. We don\u0026#39;t need to use any here, but let\u0026#39;s look at a few of the most common ones\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003econstructor\u003c/code\u003e isn\u0026#39;t necessarily a \u003cem\u003eReact\u003c/em\u003e lifecylce method but we use it like one. It\u0026#39;s where you do things that need to happen before the first render. Generally it\u0026#39;s where you set the initial state.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecomponentDidMount\u003c/code\u003e is a function that\u0026#39;s called after the first rendering is completed. This pretty similar to a \u003ccode\u003euseEffect\u003c/code\u003e call that only calls the first time. This is typically where you want to do data fetching. It doesn\u0026#39;t have to be async; we just made it async here to make the data fetching easy.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecomponentDidUpdate\u003c/code\u003e is called after your state is updated. If you\u0026#39;re doing something like Typeahead where you\u0026#39;re making reactive requests to an API based on user input, this would be an ideal place to do it.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecomponentWillUnmount\u003c/code\u003e is typically a place for cleanup. Let\u0026#39;s say you had to write a component to integrate with jQuery (I\u0026#39;ve had to write this, multiple times), this is where you\u0026#39;d clean up those references (like unattaching from DOM nodes and deleting them) so you don\u0026#39;t leak memory. This method is invoked whenever a component is about to be destroyed.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis class doesn\u0026#39;t cover all the lifecycle methods but you can imagine having different timings for different capabilities of a component can be useful. For example, if you have a set of props that come in and you need to filter those props before you display them, you can use \u003ccode\u003egetDerivedStateFromProps\u003c/code\u003e. Or if you need to react to your component being removed from the DOM (like if you\u0026#39;re subscribing to an API and you need to dispose of the subscription) you can use \u003ccode\u003ecomponentWillUnmount\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThere are lots more you can check out in \u003ca href=\"https://reactjs.org/docs/react-component.html\"\u003ethe React docs here\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eAdd the Carousel component to the Detail page.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// import at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCarousel\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./Carousel\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// first component inside div.details\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eCarousel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{pet.images}\u003c/span\u003e /\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLet\u0026#39;s make it so we can react to someone changing the photo on the carousel.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// add event listener\u003c/span\u003e\nhandleIndexClick = \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eevent\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetState\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eactive\u003c/span\u003e: +event.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edataset\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eindex\u003c/span\u003e\n  });\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// above smaller img\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// eslint-disable-next-line\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// add to img\u003c/span\u003e\nonClick={\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehandleIndexClick\u003c/span\u003e}\ndata-index={index}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eThis is how you handle events in React class components. If it was keyboard handler, you\u0026#39;d do an onChange or onKeyUp, etc. handler.\u003c/li\u003e\n\u003cli\u003eNotice that the handleIndexClick function is an arrow function. This is because we need the \u003ccode\u003ethis\u003c/code\u003e in \u003ccode\u003ehandleIndexClick\u003c/code\u003e to be the correct \u003ccode\u003ethis\u003c/code\u003e. An arrow function assures that because it will be the scope of where it was defined. This is common with how to deal with event handlers with class components.\u003c/li\u003e\n\u003cli\u003eThe data attribute comes back as a string. We want it to be a number, hence the \u003ccode\u003e+\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eWe\u0026#39;re doing bad accessibility stuff. But this makes it a lot simpler for learning for now. But don\u0026#39;t do this in production.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003e🏁 \u003ca href=\"https://github.com/btholt/citr-v8-project/tree/master/11-class-components\"\u003eClick here to see the state of the project up until now: 11-class-components\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","slug":"class-components","title":"Class Components","section":"React Capabilities","icon":"map","filePath":"/home/runner/work/complete-intro-to-react-v8/complete-intro-to-react-v8/lessons/05-react-capabilities/D-class-components.md","nextSlug":"/lessons/special-case-react-tools/error-boundaries","prevSlug":"/lessons/react-capabilities/uncontrolled-forms"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"react-capabilities","slug":"class-components"},"buildId":"ZUSqRzmCYYtXOVCRJrkjn","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>