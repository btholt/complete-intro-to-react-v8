<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>Redux Toolkit – Complete Intro to React v8</title><meta name="description" content="Come learn React from Brian Holt, a veteran React.js developer on Frontend Masters"/><meta name="og:description" content="Come learn React from Brian Holt, a veteran React.js developer on Frontend Masters"/><meta name="og:title" content="Redux Toolkit – Complete Intro to React v8"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="13"/><link rel="preload" href="/_next/static/css/2804460643ba240b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/2804460643ba240b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-fd82975a6094609f.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-18053c3f67c4d467.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1b2d39785caff4f6.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-327376b1b9678381.js" defer=""></script><script src="/_next/static/SJYJ5WD9myqUJYg-rx32J/_buildManifest.js" defer=""></script><script src="/_next/static/SJYJ5WD9myqUJYg-rx32J/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to React v8</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/complete-react-v8/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><blockquote>
<p>Please start with a fresh copy of this app: <a href="https://github.com/btholt/citr-v8-project/tree/master/14-context">Adopt Me!</a></p>
</blockquote>
<p>Redux is a well-known library that does state management for you, very similarly to how we used context. With context, you use the provider and consumer as a sort of portal to skip passing parameters through every component. With Redux, we&#39;re taking the state management <em>out</em> of React entirely and moving it to a separate store.</p>
<p>Why do we have Redux?</p>
<ol>
<li>Context used to be a lot worse to use and less useful. This made Redux (or Redux-like) management tools the only option</li>
<li>Redux code is <em>extremely testable</em>. This is probably the most compelling reason to use it. Having your state mutation be broken up in such a way to make it easy to test is fantastic. This is also mitigated because we have <code>useReducer</code> now.</li>
<li>The debugging story is very good.</li>
</ol>
<p>So given that we do now have the next context API, how often will I use Redux? That answer was previously &quot;never&quot; but now it&#39;s probably &quot;sometimes&quot; because of how good a project called Redux Toolkit is (which I will call RTK from now on, as does everyone else.) RTK took the hard parts of Redux and made them much more simple.</p>
<p>Okay, let&#39;s get started. React state management is pretty simple: call setState and let React re-render. That&#39;s it! With plain Redux without RTK it used to be:</p>
<ol>
<li>User types in input box</li>
<li>Call action creator to get an action</li>
<li>Dispatch action to Redux</li>
<li>Redux inserts the action into the root reducer</li>
<li>The root reducer delegates that action to the correct reducer</li>
<li>The reducer returns a new state given the old state and the action object</li>
<li>That new state becomes the store&#39;s state</li>
<li>React is then called by Redux and told to update</li>
</ol>
<p>So what was one step became several. But each step of this is testable, and that&#39;s great. And it&#39;s explicit and verbose. It&#39;s long to follow, but it&#39;s an easy breadcrumb trailer to follow when things go awry.</p>
<p>But now it&#39;s much easier. RTK cuts out a lot of that boiler plate and made it much easier to write and not have to write all that boilerplate.</p>
<p>So let&#39;s get started. Run</p>
<pre><code class="hljs language-bash">npm install @reduxjs/toolkit@1.8.6 react-redux@8.0.4
</code></pre>
<p>Create store.js and put in it:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { configureStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@reduxjs/toolkit&quot;</span>;

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">configureStore</span>({
  <span class="hljs-attr">reducer</span>: {},
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;
</code></pre>
<p>In App.jsx</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// delete AdoptedPetContext import</span>
<span class="hljs-comment">// delete useState import from React</span>

<span class="hljs-comment">// add import at top</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Provider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./store&quot;</span>;

<span class="hljs-comment">// delete useState call in function</span>
<span class="hljs-comment">// delete &lt;AdoptedPetContext.Provder&gt; component</span>

<span class="hljs-comment">// first component inside BrowserRouter</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>[…]<span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>;
</code></pre>
<p>This is the base store. The store is a centralized repo of data for your app. Think of it almost like a local database you can send queries and mutations too. It doesn&#39;t totally eclipse the need of local <code>useState</code> in React but it does in <em>some</em> of the cases. Typically it&#39;s going to be for app state sort of things. A general good rule of thumb is &quot;if this component unmounts, do I want to keep the state?&quot; If yes, might be app state and belongs in Redux. If no, probably not.</p>
<p>So let&#39;s go make our existing context adopted pet in Redux instead of React context.</p>
<ul>
<li>Delete AdoptedPetContext.js</li>
<li>Create adoptedPetSlice.js</li>
</ul>
<p>In there put:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { createSlice } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@reduxjs/toolkit&quot;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> adoptedPetSlice = <span class="hljs-title function_">createSlice</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;adoptedPet&quot;</span>,
  <span class="hljs-attr">initialState</span>: {
    <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>,
  },
  <span class="hljs-attr">reducers</span>: {
    <span class="hljs-attr">adopt</span>: <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
      state.<span class="hljs-property">value</span> = action.<span class="hljs-property">payload</span>;
    },
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> { adopt } = adoptedPetSlice.<span class="hljs-property">actions</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> adoptedPetSlice.<span class="hljs-property">reducer</span>;
</code></pre>
<ul>
<li>Here you name your slice (what we&#39;re calling a bundle of reducers, state, and action creators)</li>
<li>You give it an initial state</li>
<li>You give it any reducers we need in our case, we just want a simple action that sets whatever the payload is to be what&#39;s stored. This common. Sometimes you may want to do some processing or math or something like that.</li>
<li>RTK takes the liberty of making action creators and the actual reducers for you. This was something you used to have to code by hand.</li>
<li>We export the reducer to use in the store.js file.</li>
</ul>
<p>Okay let&#39;s go <em>use this</em>. Go back to store.js</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { configureStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@reduxjs/toolkit&quot;</span>;
<span class="hljs-keyword">import</span> adoptedPet <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./adoptedPetSlice&quot;</span>;

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">configureStore</span>({
  <span class="hljs-attr">reducer</span>: {
    adoptedPet,
  },
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store;
</code></pre>
<p>Add the reducer from the slice we created.</p>
<p>Okay, now in Details.jsx</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// add at top</span>
<span class="hljs-comment">// delete import AdoptedPetContext from &quot;./AdoptedPetContext&quot;;</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>; <span class="hljs-comment">// drop useContext</span>
<span class="hljs-keyword">import</span> { useDispatch } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;
<span class="hljs-keyword">import</span> { adopt } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./adoptedPetSlice&quot;</span>;

<span class="hljs-comment">// delete the next two lines</span>
<span class="hljs-comment">// eslint-disable-next-line no-unused-vars</span>
<span class="hljs-comment">// const [_, setAdoptedPet] = useContext(AdoptedPetContext);</span>

<span class="hljs-comment">// add with the hooks at the top</span>
<span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();

<span class="hljs-comment">// replace setAdoptedPet</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
  <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> {
    dispatch(adopt(pet));
    navigate(&quot;/&quot;);
  }}
&gt;
  […]
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
</code></pre>
<p>This is how to use Redux from a write perspective (we&#39;ll look at read in a sec.) You use <code>dispatch</code> functions to dispatch an action (which <code>adopt</code> does for us). That payload will eventually be passed to the reducer we made which will update our store. Redux handles all of the informing React of when to re-render. If this feels a lot like context is because it works much the same way. They both inspired each others&#39; design.</p>
<p>Okay, let&#39;s go do writing. Hop on over to SearchParams.js</p>
<pre><code class="hljs language-jsx"><span class="hljs-comment">// delete import AdoptedPetContext from &quot;./AdoptedPetContext&quot;;</span>

<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>; <span class="hljs-comment">// drop useContext</span>
<span class="hljs-keyword">import</span> { useSelector } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-redux&quot;</span>;

<span class="hljs-comment">// delete const [adoptedPet] = useContext(AdoptedPetContext);</span>
<span class="hljs-keyword">const</span> adoptedPet = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">adoptedPet</span>.<span class="hljs-property">value</span>);
</code></pre>
<p>That&#39;s it! You give <code>useSelector</code> a function that takes in the entire state tree and gives back just what you need. Keep in mind this is a subscription function: it will use this function to judge whether or not it needs to re-render your component. So don&#39;t just give it <code>state =&gt; state</code> or else it&#39;ll re-render on <em>every state change ever</em> which is likely not what you want.</p>
<p>Again, this is all fairly similar to Context but it definitely has its upsides. Slices are easy to test. And it externalize React&#39;s app state management from React itself. This means you can treat state mutation separately from UI which is generally a good thing. RTK made this much more palatable.</p>
</div><div class="lesson-links"><a href="/lessons/typescript/refactor-app" class="prev">← Previous</a><a href="/lessons/redux/more-app-state" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":""},"html":"\u003cblockquote\u003e\n\u003cp\u003ePlease start with a fresh copy of this app: \u003ca href=\"https://github.com/btholt/citr-v8-project/tree/master/14-context\"\u003eAdopt Me!\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eRedux is a well-known library that does state management for you, very similarly to how we used context. With context, you use the provider and consumer as a sort of portal to skip passing parameters through every component. With Redux, we\u0026#39;re taking the state management \u003cem\u003eout\u003c/em\u003e of React entirely and moving it to a separate store.\u003c/p\u003e\n\u003cp\u003eWhy do we have Redux?\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eContext used to be a lot worse to use and less useful. This made Redux (or Redux-like) management tools the only option\u003c/li\u003e\n\u003cli\u003eRedux code is \u003cem\u003eextremely testable\u003c/em\u003e. This is probably the most compelling reason to use it. Having your state mutation be broken up in such a way to make it easy to test is fantastic. This is also mitigated because we have \u003ccode\u003euseReducer\u003c/code\u003e now.\u003c/li\u003e\n\u003cli\u003eThe debugging story is very good.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eSo given that we do now have the next context API, how often will I use Redux? That answer was previously \u0026quot;never\u0026quot; but now it\u0026#39;s probably \u0026quot;sometimes\u0026quot; because of how good a project called Redux Toolkit is (which I will call RTK from now on, as does everyone else.) RTK took the hard parts of Redux and made them much more simple.\u003c/p\u003e\n\u003cp\u003eOkay, let\u0026#39;s get started. React state management is pretty simple: call setState and let React re-render. That\u0026#39;s it! With plain Redux without RTK it used to be:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eUser types in input box\u003c/li\u003e\n\u003cli\u003eCall action creator to get an action\u003c/li\u003e\n\u003cli\u003eDispatch action to Redux\u003c/li\u003e\n\u003cli\u003eRedux inserts the action into the root reducer\u003c/li\u003e\n\u003cli\u003eThe root reducer delegates that action to the correct reducer\u003c/li\u003e\n\u003cli\u003eThe reducer returns a new state given the old state and the action object\u003c/li\u003e\n\u003cli\u003eThat new state becomes the store\u0026#39;s state\u003c/li\u003e\n\u003cli\u003eReact is then called by Redux and told to update\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eSo what was one step became several. But each step of this is testable, and that\u0026#39;s great. And it\u0026#39;s explicit and verbose. It\u0026#39;s long to follow, but it\u0026#39;s an easy breadcrumb trailer to follow when things go awry.\u003c/p\u003e\n\u003cp\u003eBut now it\u0026#39;s much easier. RTK cuts out a lot of that boiler plate and made it much easier to write and not have to write all that boilerplate.\u003c/p\u003e\n\u003cp\u003eSo let\u0026#39;s get started. Run\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm install @reduxjs/toolkit@1.8.6 react-redux@8.0.4\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCreate store.js and put in it:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { configureStore } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@reduxjs/toolkit\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store = \u003cspan class=\"hljs-title function_\"\u003econfigureStore\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003ereducer\u003c/span\u003e: {},\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e store;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn App.jsx\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// delete AdoptedPetContext import\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// delete useState import from React\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// add import at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eProvider\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react-redux\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e store \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./store\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// delete useState call in function\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// delete \u0026lt;AdoptedPetContext.Provder\u0026gt; component\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// first component inside BrowserRouter\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estore\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{store}\u003c/span\u003e\u0026gt;\u003c/span\u003e[…]\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eProvider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is the base store. The store is a centralized repo of data for your app. Think of it almost like a local database you can send queries and mutations too. It doesn\u0026#39;t totally eclipse the need of local \u003ccode\u003euseState\u003c/code\u003e in React but it does in \u003cem\u003esome\u003c/em\u003e of the cases. Typically it\u0026#39;s going to be for app state sort of things. A general good rule of thumb is \u0026quot;if this component unmounts, do I want to keep the state?\u0026quot; If yes, might be app state and belongs in Redux. If no, probably not.\u003c/p\u003e\n\u003cp\u003eSo let\u0026#39;s go make our existing context adopted pet in Redux instead of React context.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDelete AdoptedPetContext.js\u003c/li\u003e\n\u003cli\u003eCreate adoptedPetSlice.js\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn there put:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createSlice } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@reduxjs/toolkit\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e adoptedPetSlice = \u003cspan class=\"hljs-title function_\"\u003ecreateSlice\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;adoptedPet\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003einitialState\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ereducers\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eadopt\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate, action\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      state.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e = action.\u003cspan class=\"hljs-property\"\u003epayload\u003c/span\u003e;\n    },\n  },\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { adopt } = adoptedPetSlice.\u003cspan class=\"hljs-property\"\u003eactions\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e adoptedPetSlice.\u003cspan class=\"hljs-property\"\u003ereducer\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eHere you name your slice (what we\u0026#39;re calling a bundle of reducers, state, and action creators)\u003c/li\u003e\n\u003cli\u003eYou give it an initial state\u003c/li\u003e\n\u003cli\u003eYou give it any reducers we need in our case, we just want a simple action that sets whatever the payload is to be what\u0026#39;s stored. This common. Sometimes you may want to do some processing or math or something like that.\u003c/li\u003e\n\u003cli\u003eRTK takes the liberty of making action creators and the actual reducers for you. This was something you used to have to code by hand.\u003c/li\u003e\n\u003cli\u003eWe export the reducer to use in the store.js file.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOkay let\u0026#39;s go \u003cem\u003euse this\u003c/em\u003e. Go back to store.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { configureStore } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;@reduxjs/toolkit\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e adoptedPet \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./adoptedPetSlice\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store = \u003cspan class=\"hljs-title function_\"\u003econfigureStore\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003ereducer\u003c/span\u003e: {\n    adoptedPet,\n  },\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e store;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAdd the reducer from the slice we created.\u003c/p\u003e\n\u003cp\u003eOkay, now in Details.jsx\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// add at top\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// delete import AdoptedPetContext from \u0026quot;./AdoptedPetContext\u0026quot;;\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// drop useContext\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useDispatch } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react-redux\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { adopt } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./adoptedPetSlice\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// delete the next two lines\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// eslint-disable-next-line no-unused-vars\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// const [_, setAdoptedPet] = useContext(AdoptedPetContext);\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// add with the hooks at the top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e dispatch = \u003cspan class=\"hljs-title function_\"\u003euseDispatch\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment\"\u003e// replace setAdoptedPet\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{()\u003c/span\u003e =\u0026gt;\u003c/span\u003e {\n    dispatch(adopt(pet));\n    navigate(\u0026quot;/\u0026quot;);\n  }}\n\u0026gt;\n  […]\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is how to use Redux from a write perspective (we\u0026#39;ll look at read in a sec.) You use \u003ccode\u003edispatch\u003c/code\u003e functions to dispatch an action (which \u003ccode\u003eadopt\u003c/code\u003e does for us). That payload will eventually be passed to the reducer we made which will update our store. Redux handles all of the informing React of when to re-render. If this feels a lot like context is because it works much the same way. They both inspired each others\u0026#39; design.\u003c/p\u003e\n\u003cp\u003eOkay, let\u0026#39;s go do writing. Hop on over to SearchParams.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-jsx\"\u003e\u003cspan class=\"hljs-comment\"\u003e// delete import AdoptedPetContext from \u0026quot;./AdoptedPetContext\u0026quot;;\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// drop useContext\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useSelector } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react-redux\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// delete const [adoptedPet] = useContext(AdoptedPetContext);\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e adoptedPet = \u003cspan class=\"hljs-title function_\"\u003euseSelector\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate\u003c/span\u003e) =\u0026gt;\u003c/span\u003e state.\u003cspan class=\"hljs-property\"\u003eadoptedPet\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat\u0026#39;s it! You give \u003ccode\u003euseSelector\u003c/code\u003e a function that takes in the entire state tree and gives back just what you need. Keep in mind this is a subscription function: it will use this function to judge whether or not it needs to re-render your component. So don\u0026#39;t just give it \u003ccode\u003estate =\u0026gt; state\u003c/code\u003e or else it\u0026#39;ll re-render on \u003cem\u003eevery state change ever\u003c/em\u003e which is likely not what you want.\u003c/p\u003e\n\u003cp\u003eAgain, this is all fairly similar to Context but it definitely has its upsides. Slices are easy to test. And it externalize React\u0026#39;s app state management from React itself. This means you can treat state mutation separately from UI which is generally a good thing. RTK made this much more palatable.\u003c/p\u003e\n","slug":"redux-toolkit","title":"Redux Toolkit","section":"Redux","icon":"database","filePath":"/home/runner/work/complete-intro-to-react-v8/complete-intro-to-react-v8/lessons/14-redux/A-redux-toolkit.md","nextSlug":"/lessons/redux/more-app-state","prevSlug":"/lessons/typescript/refactor-app"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"redux","slug":"redux-toolkit"},"buildId":"SJYJ5WD9myqUJYg-rx32J","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>